<div class="messenger-header" *ngIf="playerInitialized" [@fade]>
	<button class="transparent inline back-btn"><fa name="arrow-left" size="2x"></fa></button>
	<div class="profile-picture inline">
		<img src="/assets/images/unknown.jpg">
	</div>
	<div class="inline name">
		<h3>UNKNOWN</h3>
		<p *ngIf="!typing">Online</p>
		<p *ngIf="typing">Typing...</p>
	</div>
	<button class="transparent inline right center-y mr-1" [matMenuTriggerFor]="menu"><fa name="ellipsis-v" size="2x"></fa></button>
	<button class="transparent inline right center-y mr-1"><fa name="phone" size="2x"></fa></button>
	<button class="transparent inline right center-y mr-1"><fa name="video-camera" size="2x"></fa></button>
	<mat-menu #menu="matMenu">
	  <a mat-menu-item (click)="openContact();">View contact</a>
	  <a mat-menu-item routerLink="/leaderboard">Media</a>
	  <a mat-menu-item routerLink="/settings" style="color:red;">Exit game</a>
	</mat-menu>
</div>

<div class="message-area" *ngIf="playerInitialized">
	<div *ngFor='let message of messages' class="message-row" [@fade]>
	  <div class="row" [ngClass]="{ 'message-right': !message.incoming, 'message-left': message.incoming }">
	  	<div class="tip"></div>
	  	<div class="message-content">
	  		<span>{{ message.text }}</span>
	  		<div class="image-wrapper" *ngIf="message.image">
	  			<img [src]="message.image" (load)="handleImageLoad()" (click)="showFullScreen(message)" />
	  		</div>
	  		<div class="checked" *ngIf="!message.incoming">
		  		<fa name="check" class="check-overflow"></fa>
		  		<fa name="check"></fa>
		  	</div>
		  	<span class="message-time">{{ message.time }}</span>
	  	</div>
	  </div>
	</div>
</div>

<div class="messenger-input" *ngIf="playerInitialized" [@fade]>
	<div class="inline input-area">
		<button class="icon-btn" (click)="showEmojiPicker=!showEmojiPicker"><fa name="smile-o" size="2x"></fa></button>
		<input placeholder="Type a message" type="text"  name="text-input"  [(ngModel)]="message" (keydown)="sendMessage($event)">
		<div class="file-input-wrapper">
		  <button class="icon-btn right mr-05 btn-file-input"><fa name="camera" size="2x"></fa></button>
		  <input type="file" name="file" accept="image/*;capture=camera" (change)="handleInputChange($event)">
		</div>
		<button (click)="showGallery=true" class="icon-btn right mr-1"><fa name="paperclip" size="2x"></fa></button>
	</div>
	<dir class="inline microphone">
		<button class="microphone-btn"><fa name="microphone" size="2x"></fa></button>
	</dir>
</div>

<div class="center-xy container" *ngIf="!playerInitialized" [@fade]>
	<img class="logo center-x" src="/assets/images/logo.png" *ngIf="!playerInitialized">

	<mat-form-field class="inline name-field center-x">
    <input matInput placeholder="Enter name (Group)" [(ngModel)]="player.name">
  </mat-form-field>
  <button class="start-btn" (click)="startGame()">START GAME</button>
</div>


<emoji-mart *ngIf="showEmojiPicker" title="Pick your emojiâ€¦" emoji="point_up" (emojiClick)="addEmoji($event)" [style]="{ position: 'absolute', bottom: '0px', left: '0px'}"></emoji-mart>
<div class="gallery" *ngIf="showGallery">
	<div class="gallery-header">
		<button class="transparent inline back-btn" (click)="showGallery=false"><fa name="arrow-left" size="2x"></fa></button>
		<h3 class="inline">All images</h3>
		<button class="transparent inline right menu-btn"><fa name="ellipsis-v" size="2x"></fa></button>
	</div>
	<div class="gallery-image-wrapper" *ngFor='let image of galleryImages'>
		<img [src]="image.src" (click)="attachImage(image.src)">
	</div>
</div>

<div class="full-screen-container" *ngIf="showImageFullScreen">
	<div class="fullscreen-header">
		<button class="transparent mb-1" (click)="fullscreen = false"><fa name="arrow-left" size="2x"></fa></button>
		<div class="fullscreen-contact-name inline">
			<h3>UNKNOWN</h3>
			<p>1 hour ago.</p>
		</div>
		<button class="transparent icon-btn inline right"><fa name="ellipsis-v" size="2x"></fa></button>
		<button class="transparent icon-btn inline right mr-1"><fa name="share" size="2x"></fa></button>
		<button class="transparent icon-btn inline right mr-1"><fa name="star-o" size="2x"></fa></button>
	</div>
	<img [src]="selectedMessage.image">
</div>
